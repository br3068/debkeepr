<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Analysis of Richard Dafforne’s Journal and Ledger • debkeepr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Analysis of Richard Dafforne’s Journal and Ledger">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-126059158-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-126059158-1');
</script>
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">debkeepr</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">0.0.4.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/transactions.html">1. Transactions in Richard Dafforne's Journal</a>
    </li>
    <li>
      <a href="../articles/ledger.html">2. Analysis of Richard Dafforne’s Journal and Ledger</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/jessesadler/debkeepr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Analysis of Richard Dafforne’s Journal and Ledger</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/jessesadler/debkeepr/blob/master/vignettes/ledger.Rmd"><code>vignettes/ledger.Rmd</code></a></small>
      <div class="hidden name"><code>ledger.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(debkeepr)</a></code></pre></div>
<p>The tripartite monetary system of pounds, shillings, and pence used throughout medieval and early modern Europe creates practical problems for transcribing and analyzing large sets of monetary data. Account books contain various sorts of historically significant data, but the use of non-decimal monetary systems complicates analysis. How should the three separate monetary units be recorded in a data base, and how can they be brought together in ways that facilitate the analysis of account books? So long as these issues exist, the time consuming task of transcribing the transactions in account books into a data base hardly seems a valuable use of time, thereby precluding the use of digital tools to analyze or visualize the contents.</p>
<p>The <code>debkeepr</code> package seeks to facilitate digital analysis of account books through the implementation of the <code>deb_lsd</code> and <code>deb_decimal</code> classes that integrate pounds, shillings, and pence values into R.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> At a very practical level, the goal of <code>debkeepr</code> is to make the transcription of historical account books into a data base a more valuable research activity. Once the contents of a set of account books are transcribed into a data base such as the example journal and ledger from Richard Dafforne’s <em>The Merchant’s Mirrour, Or Directions for the Perfect Ordering and Keeping of His Accounts</em> (London, 1660) used here, <code>debkeepr</code> assists the researcher in both the analysis and presentation of the data. By creating an environment to analyze the contents of account books in R, <code>debkeepr</code> also seeks to make the analysis of accounts more transparent and amendable to the practices of reproducible research.</p>
<p>This vignette uses the practice journal and ledger from the 1660 edition of Richard Dafforne’s <em>Merchant’s Mirrour</em> to give an example for some of the ways that <code>debkeepr</code> can facilitate the examination and visualization of a set of account books. An introduction to Richard Dafforne and his manual on double-entry bookkeeping, along with analysis of individual transactions in the journal, can be found in the <a href="https://jessesadler.github.io/debkeepr/articles/transactions.html">Transactions in Richard Dafforne’s Journal vignette</a>. The practice journal and ledger in <em>Merchant’s Mirrour</em> provide a good starting point, because they are printed — and therefore more accessible — and have a reasonable length. A PDF copy of the journal is <a href="https://github.com/jessesadler/debkeepr/blob/master/data-raw/dafforne-journal.pdf">available for download</a>. Pounds, shillings, and pence units can be entered into three separate columns when creating the data base and then transformed into a column of class <code>deb_lsd</code> with <code><a href="../reference/lsd-column.html">deb_gather_lsd()</a></code>. The result of this process is the <code>dafforne_transactions</code> and <code>dafforne_accounts</code> data that is included with <code>debkeepr</code>.</p>
<div id="the-data" class="section level2">
<h2 class="hasAnchor">
<a href="#the-data" class="anchor"></a>The data</h2>
<p>Dafforne’s example journal and ledger record the mercantile activities of a fictional merchant in London over a seven month period in 1634.<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a> Following the practices of double-entry bookkeeping, the journal documents each transaction and clearly lists one account as creditor and one as debtor. The accompanying ledger derives entirely from the journal and does not add any new information. Whereas the journal is organized by transaction, the ledger is organized by account. Each transaction is placed in the ledger twice, once under the credit account and once under the debit account — hence double-entry bookkeeping. Dafforne’s journal contains 191 transactions between 47 accounts, and thus the ledger possesses 282 entries divided among the 47 accounts.</p>
<p><code>dafforne_transactions</code> includes all of the transactions from the journal except those dealing with the balance account used to close the books. These transactions are excluded because they can be recreated with the help of <code>debkeepr</code>, shown in more detail below.<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a> <code>dafforne_transactions</code> has 177 transactions or rows and 8 variables. Each transaction has a creditor and debtor account, the date of the transaction, and the value in pounds sterling contained in a <code>deb_lsd</code> column. Extra details include the pages on which the transaction can be found in Dafforne’s journal and ledger and a short description of the transaction. Addition information about the accounts that make up the books are contained in <code>dafforne_accounts</code>. The account id matches those used in the credit and debit variables in <code>dafforne_transactions</code>. This second data frame also has a name for each account and a short description of the account. The “investor” column presents an extra organizing variable, listing the investor or the person’s whose capital is involved in the account.<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a></p>
</div>
<div id="overview-of-the-account-books" class="section level2">
<h2 class="hasAnchor">
<a href="#overview-of-the-account-books" class="anchor"></a>Overview of the account books</h2>
<p>At a basic level, placing the contents of a set of account books into a data base can expedite the exploration of the transactions and relationships between the accounts. Even a modestly sized account book such as Dafforne’s journal has too many accounts and transactions to easily keep in one’s mind. To get a sense of the data, it helps to create a visual overview of the transactions and a summary of the accounts. This vignette uses <a href="https://dplyr.tidyverse.org">dplyr</a> to manipulate the data and to prepare it for plotting with <a href="https://ggplot2.tidyverse.org">ggplot2</a>.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(debkeepr)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(dplyr)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(ggplot2)</a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co"># load the data</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5">transactions &lt;-<span class="st"> </span>dafforne_transactions</a>
<a class="sourceLine" id="cb2-6" data-line-number="6">accounts &lt;-<span class="st"> </span>dafforne_accounts</a></code></pre></div>
<p>Note that <code>deb_lsd</code> objects are not currently fully integrated into <code>dplyr</code>. This means that certain <code>dplyr</code> functions such as <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code>, and <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code> do not work with <code>deb_lsd</code> columns. The same is true for plotting with <code>ggplot2</code>. However, you can get around these limitations by converting <code>deb_lsd</code> values to <code>deb_decimal</code>. The following code simplifies the <code>dafforne_transactions</code> data frame and adds a <code>deb_decimal</code> column.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">(transactions &lt;-<span class="st"> </span>transactions <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="st">   </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">dec =</span> <span class="kw"><a href="../reference/cast-decimal.html">deb_as_decimal</a></span>(lsd)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="st">   </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(id, credit, debit, date, lsd, dec))</a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="co">#&gt; # A tibble: 177 x 6</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co">#&gt;       id credit debit date                  lsd          dec</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co">#&gt;    &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;date&gt;     &lt;lsd[20s:12d]&gt; &lt;l[20s:12d]&gt;</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="co">#&gt;  1     1      2     1 1633-01-01    1000:15s:7d  1000.779167</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co">#&gt;  2     2      2     3 1633-01-01     477:10s:0d   477.500000</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="co">#&gt;  3     3      2     4 1633-01-01       55:0s:6d    55.025000</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="co">#&gt;  4     4      2     5 1633-01-01      240:0s:0d   240.000000</span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="co">#&gt;  5     5      2     6 1633-01-01      229:0s:0d   229.000000</span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="co">#&gt;  6     6      2     8 1633-01-01       3:17s:8d     3.883333</span></a>
<a class="sourceLine" id="cb3-13" data-line-number="13"><span class="co">#&gt;  7     7      7     2 1633-01-01      150:0s:0d   150.000000</span></a>
<a class="sourceLine" id="cb3-14" data-line-number="14"><span class="co">#&gt;  8     8      9    11 1633-01-04      360:0s:0d   360.000000</span></a>
<a class="sourceLine" id="cb3-15" data-line-number="15"><span class="co">#&gt;  9     9      1     9 1633-01-04      144:0s:0d   144.000000</span></a>
<a class="sourceLine" id="cb3-16" data-line-number="16"><span class="co">#&gt; 10    10      5    10 1633-01-04      120:0s:0d   120.000000</span></a>
<a class="sourceLine" id="cb3-17" data-line-number="17"><span class="co">#&gt; # … with 167 more rows</span></a></code></pre></div>
<p>To get a visual overview of the transactions, the value of each transaction can be plotted. Because each transaction is associated with two accounts — a debtor account and a creditor account — the journal could be visualized from the perspective of either the debtor or creditor accounts.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="dt">data =</span> transactions) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> credit, <span class="dt">y =</span> dec), <span class="dt">alpha =</span> <span class="fl">0.7</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span>(<span class="dt">labels =</span> scales<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/scales/topics/dollar_format">dollar_format</a></span>(<span class="dt">prefix =</span> <span class="st">"£"</span>)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(<span class="dt">x =</span> <span class="st">"Creditor accounts"</span>,</a>
<a class="sourceLine" id="cb4-5" data-line-number="5">       <span class="dt">y =</span> <span class="st">"Transaction values"</span>,</a>
<a class="sourceLine" id="cb4-6" data-line-number="6">       <span class="dt">title =</span> <span class="st">"Value of Transactions by Creditor Account"</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_light</a></span>()</a></code></pre></div>
<p><img src="ledger_files/figure-html/credit-transactions-1.png" width="576"></p>
<p>Alternatively, both the credit and debit account can be shown, essentially reproducing a double-entry-bookkeeping ledger, as each transaction is shown twice.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="dt">data =</span> transactions) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> credit, <span class="dt">y =</span> dec, <span class="dt">color =</span> <span class="st">"Credit"</span>), <span class="dt">alpha =</span> <span class="fl">0.7</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> debit, <span class="dt">y =</span> dec, <span class="dt">color =</span> <span class="st">"Debit"</span>), <span class="dt">alpha =</span> <span class="fl">0.7</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_color_manual</a></span>(<span class="dt">values =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dt">Credit =</span> <span class="st">"black"</span>, <span class="dt">Debit =</span> <span class="st">"red"</span>)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span>(<span class="dt">labels =</span> scales<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/scales/topics/dollar_format">dollar_format</a></span>(<span class="dt">prefix =</span> <span class="st">"£"</span>)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(<span class="dt">x =</span> <span class="st">"Accounts"</span>,</a>
<a class="sourceLine" id="cb5-7" data-line-number="7">       <span class="dt">y =</span> <span class="st">"Transaction values"</span>,</a>
<a class="sourceLine" id="cb5-8" data-line-number="8">       <span class="dt">color =</span> <span class="st">"Relationship"</span>,</a>
<a class="sourceLine" id="cb5-9" data-line-number="9">       <span class="dt">title =</span> <span class="st">"Value of Transactions by Accounts"</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_light</a></span>()</a></code></pre></div>
<p><img src="ledger_files/figure-html/transactions-1.png" width="672"></p>
<p>The exact values of the transactions are not necessarily easy to follow in these plots with 177 and 354 points respectively, but they give a good sense of the basic distribution of transactions. Only a handful of transactions involved values over £1,000 sterling, and the majority of transactions were for less that £200. The smaller number of transactions over £1,000 make it possible to match up the credit and debit accounts in the plot with both sets of accounts.</p>
<p>The above plots provide a view of the raw data from Dafforne’s journal, but they do little to show an overview of the accounts. What was the total credit or value sent by each account, what was the total debit or value received by each account, and how much value, if any, remained on the account at the closing of the book? These questions can be answered separately with <code><a href="../reference/transactions.html">deb_credit()</a></code>, <code><a href="../reference/transactions.html">deb_debit()</a></code>, and <code><a href="../reference/transactions.html">deb_current()</a></code>, or together with <code><a href="../reference/transactions.html">deb_account_summary()</a></code>.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="co"># Summary of accounts</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="kw"><a href="../reference/transactions.html">deb_account_summary</a></span>(transactions)</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="co">#&gt; # A tibble: 46 x 4</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co">#&gt;    account_id         credit          debit        current</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="co">#&gt;         &lt;dbl&gt; &lt;lsd[20s:12d]&gt; &lt;lsd[20s:12d]&gt; &lt;lsd[20s:12d]&gt;</span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="co">#&gt;  1          1   1956:10s:11d    2903:13s:0d   -947:-2s:-1d</span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="co">#&gt;  2          2     2006:3s:9d      150:0s:0d     1856:3s:9d</span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="co">#&gt;  3          3      570:0s:0d      570:0s:0d        0:0s:0d</span></a>
<a class="sourceLine" id="cb6-9" data-line-number="9"><span class="co">#&gt;  4          4       75:0s:8d       75:0s:8d        0:0s:0d</span></a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="co">#&gt;  5          5      813:3s:0d      813:3s:0d        0:0s:0d</span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11"><span class="co">#&gt;  6          6     568:1s:11d      869:2s:7d    -301:0s:-8d</span></a>
<a class="sourceLine" id="cb6-12" data-line-number="12"><span class="co">#&gt;  7          7   2958:18s:10d   2958:18s:10d        0:0s:0d</span></a>
<a class="sourceLine" id="cb6-13" data-line-number="13"><span class="co">#&gt;  8          8    1580:10s:0d    1580:10s:0d        0:0s:0d</span></a>
<a class="sourceLine" id="cb6-14" data-line-number="14"><span class="co">#&gt;  9          9     1744:1s:4d     1744:1s:4d        0:0s:0d</span></a>
<a class="sourceLine" id="cb6-15" data-line-number="15"><span class="co">#&gt; 10         10      606:2s:6d      606:2s:6d        0:0s:0d</span></a>
<a class="sourceLine" id="cb6-16" data-line-number="16"><span class="co">#&gt; # … with 36 more rows</span></a></code></pre></div>
<p>From this information, a line-range plot can be constructed with the upper limit represented by the total credit, the lower limit by the total debit, and the current value by a point. Though conceptually it is not always helpful to think of debits as negative values — debits represent the values received by an account — it makes sense in this instance to distinguish credit values from debit values by making debits negative.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co"># Plot summary of accounts</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="kw"><a href="../reference/transactions.html">deb_account_summary</a></span>(transactions, <span class="dt">lsd =</span> dec) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">debit =</span> <span class="op">-</span>debit) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="st">      </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html">geom_linerange</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> account_id, <span class="dt">ymin =</span> debit, <span class="dt">ymax =</span> credit)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="st">      </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> account_id, <span class="dt">y =</span> current,</a>
<a class="sourceLine" id="cb7-7" data-line-number="7">                     <span class="dt">color =</span> <span class="kw"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span>(current <span class="op">==</span><span class="st"> </span><span class="dv">0</span>, <span class="st">"Closed"</span>, <span class="st">"Open"</span>))) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"><span class="st">      </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_color_manual</a></span>(<span class="dt">values =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dt">Open =</span> <span class="st">"black"</span>, <span class="dt">Closed =</span> <span class="st">"blue"</span>)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-9" data-line-number="9"><span class="st">      </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span>(<span class="dt">labels =</span> scales<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/scales/topics/dollar_format">dollar_format</a></span>(<span class="dt">prefix =</span> <span class="st">"£"</span>)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-10" data-line-number="10"><span class="st">      </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(<span class="dt">x =</span> <span class="st">"Accounts"</span>,</a>
<a class="sourceLine" id="cb7-11" data-line-number="11">             <span class="dt">y =</span> <span class="st">"Pounds sterling"</span>,</a>
<a class="sourceLine" id="cb7-12" data-line-number="12">             <span class="dt">color =</span> <span class="st">"Status"</span>,</a>
<a class="sourceLine" id="cb7-13" data-line-number="13">             <span class="dt">title =</span> <span class="st">"Summary of the accounts"</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-14" data-line-number="14"><span class="st">      </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_light</a></span>()</a></code></pre></div>
<p><img src="ledger_files/figure-html/account-summary-1.png" width="576"></p>
<p>This summary plot shows the accounts through which the largest amounts of capital passed and highlights the accounts that remain open at the end of the books compared to those that have been closed by having their balance zeroed out.<a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a> The plot provides a good basis to identify and further investigate the most valuable accounts. For instance, we can find the accounts that had a total credit exceeding £1,900 with the help of <code><a href="../reference/transactions.html">deb_credit()</a></code>. Note the use of <code><a href="https://www.rdocumentation.org/packages/base/topics/numeric">as.numeric()</a></code> in <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code> since <code>dplyr</code> cannot currently arrange on an object such as <code>deb_lsd</code>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw"><a href="../reference/transactions.html">deb_credit</a></span>(transactions) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(lsd <span class="op">&gt;</span><span class="st"> </span><span class="dv">1900</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/join.html">left_join</a></span>(<span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(accounts, id, account), <span class="dt">by =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"account_id"</span> =<span class="st"> "id"</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span>(<span class="kw"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/numeric">as.numeric</a></span>(lsd)))</a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="co">#&gt; # A tibble: 6 x 3</span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="co">#&gt;   account_id            lsd account                                        </span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7"><span class="co">#&gt;        &lt;dbl&gt; &lt;lsd[20s:12d]&gt; &lt;chr&gt;                                          </span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8"><span class="co">#&gt; 1         13     3430:7s:9d James Wilkinson                                </span></a>
<a class="sourceLine" id="cb8-9" data-line-number="9"><span class="co">#&gt; 2          7   2958:18s:10d Jacob Symonson - account current               </span></a>
<a class="sourceLine" id="cb8-10" data-line-number="10"><span class="co">#&gt; 3         18     2447:3s:5d Randoll Rice - account current                 </span></a>
<a class="sourceLine" id="cb8-11" data-line-number="11"><span class="co">#&gt; 4         38    2215:13s:9d Amsterdam exchange - company with Jacob Symons…</span></a>
<a class="sourceLine" id="cb8-12" data-line-number="12"><span class="co">#&gt; 5          2     2006:3s:9d Stock                                          </span></a>
<a class="sourceLine" id="cb8-13" data-line-number="13"><span class="co">#&gt; 6          1   1956:10s:11d Cash</span></a></code></pre></div>
</div>
<div id="relationship-between-accounts" class="section level2">
<h2 class="hasAnchor">
<a href="#relationship-between-accounts" class="anchor"></a>Relationship between accounts</h2>
<p>The above plots treat either the transactions or accounts as discrete entities. However, an account book is naturally relational. The structure of <code>dafforne_transactions</code> and <code>dafforne_accounts</code> purposely mimics that used to create <a href="https://www.jessesadler.com/post/network-analysis-with-r/#nodes-edges">network graphs</a>. <code>dafforne_transactions</code> has the form of a directed edge list: each transaction is a link between two accounts with the values going from the credit account to the debit account. <code>dafforne_accounts</code> is a node list, or a data frame in which each account id found in either the credit or debit column of <code>dafforne_transactions</code> is listed along with additional information about the accounts. There are a variety of ways to <a href="https://www.jessesadler.com/post/network-analysis-with-r/">create and plot network graphs in R</a>, but this vignette will use <a href="http://igraph.org">igraph</a> to create the graph object and <a href="https://cran.r-project.org/web/packages/ggraph/index.html">ggraph</a> to plot the graph.</p>
<p>A network graph can show various types of information beyond the linking of the accounts by associating the edges or links and the nodes or accounts with variables from the data. The links between the accounts can be related to the total value of the transactions in each direction, and the nodes can be associated with either the total value they received (debit) or sent (credit). Extra information can be added to the nodes by joining the total values for each account with columns from the <code>dafforne_accounts</code> data. In this case, the “investor” variable is attached to the debit values for each account.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(igraph)</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(ggraph)</a>
<a class="sourceLine" id="cb9-3" data-line-number="3"></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="co"># Nodes: Total debit for each account</span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5">debits &lt;-<span class="st"> </span><span class="kw"><a href="../reference/transactions.html">deb_debit</a></span>(transactions, <span class="dt">lsd =</span> dec) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/join.html">left_join</a></span>(<span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(accounts, id, investor), <span class="dt">by =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"account_id"</span> =<span class="st"> "id"</span>))</a>
<a class="sourceLine" id="cb9-7" data-line-number="7"></a>
<a class="sourceLine" id="cb9-8" data-line-number="8"><span class="co"># Edges: Sum of transactions by link</span></a>
<a class="sourceLine" id="cb9-9" data-line-number="9">transactions_sum &lt;-<span class="st"> </span>transactions <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-10" data-line-number="10"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(credit, debit) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-11" data-line-number="11"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span>(<span class="dt">dec =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sum">sum</a></span>(dec)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-12" data-line-number="12"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span>(dec)</a>
<a class="sourceLine" id="cb9-13" data-line-number="13"></a>
<a class="sourceLine" id="cb9-14" data-line-number="14"><span class="co"># Create igraph object</span></a>
<a class="sourceLine" id="cb9-15" data-line-number="15">ledger_graph &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/igraph/topics/graph_from_data_frame">graph_from_data_frame</a></span>(<span class="dt">d =</span> transactions_sum,</a>
<a class="sourceLine" id="cb9-16" data-line-number="16">                                      <span class="dt">vertices =</span> debits,</a>
<a class="sourceLine" id="cb9-17" data-line-number="17">                                      <span class="dt">directed =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb9-18" data-line-number="18"><span class="co">#&gt; Warning in if (class(newval) == "factor") {: the condition has length &gt; 1</span></a>
<a class="sourceLine" id="cb9-19" data-line-number="19"><span class="co">#&gt; and only the first element will be used</span></a>
<a class="sourceLine" id="cb9-20" data-line-number="20"></a>
<a class="sourceLine" id="cb9-21" data-line-number="21"><span class="co">#&gt; Warning in if (class(newval) == "factor") {: the condition has length &gt; 1</span></a>
<a class="sourceLine" id="cb9-22" data-line-number="22"><span class="co">#&gt; and only the first element will be used</span></a></code></pre></div>
<p>The creation of an <code>igraph</code> object opens a whole set of tools for analyzing the account books, but here the network analysis is primarily restricted to its visualization. The following graph shows the total value of the transactions between each set of accounts using the transparency of the link, and arrows are present on the edges to show the direction of the transaction from the creditor account to the debtor account. The size of the node is used to represent the total accumulated value for each account. The nodes are labelled with their account id and colored by the “investor” variable.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="co"># Ledger graph</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Random">set.seed</a></span>(<span class="dv">240</span>)</a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/ggraph/topics/ggraph">ggraph</a></span>(ledger_graph, <span class="dt">layout =</span> <span class="st">"kk"</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/ggraph/topics/geom_edge_fan">geom_edge_fan</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">edge_alpha =</span> dec),</a>
<a class="sourceLine" id="cb10-5" data-line-number="5">                <span class="dt">width =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb10-6" data-line-number="6">                <span class="dt">arrow =</span> <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/reexports.html">arrow</a></span>(<span class="dt">length =</span> <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/reexports.html">unit</a></span>(<span class="dv">2</span>, <span class="st">'mm'</span>)),</a>
<a class="sourceLine" id="cb10-7" data-line-number="7">                <span class="dt">end_cap =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/ggraph/topics/geometry">circle</a></span>(<span class="dv">3</span>, <span class="st">'mm'</span>)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-8" data-line-number="8"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/ggraph/topics/scale_edge_alpha">scale_edge_alpha</a></span>(<span class="dt">labels =</span> scales<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/scales/topics/dollar_format">dollar_format</a></span>(<span class="dt">prefix =</span> <span class="st">"£"</span>)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/ggraph/topics/geom_node_point">geom_node_point</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">size =</span> dec, <span class="dt">color =</span> investor), <span class="dt">alpha =</span> <span class="fl">0.9</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_color_brewer</a></span>(<span class="dt">palette =</span> <span class="st">"Paired"</span>, <span class="dt">direction =</span> <span class="dv">-1</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-11" data-line-number="11"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/ggraph/topics/geom_node_text">geom_node_text</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">label =</span> name)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-12" data-line-number="12"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_size.html">scale_size_continuous</a></span>(<span class="dt">range =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1</span>, <span class="dv">10</span>), <span class="dt">labels =</span> scales<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/scales/topics/dollar_format">dollar_format</a></span>(<span class="dt">prefix =</span> <span class="st">"£"</span>)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-13" data-line-number="13"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(<span class="dt">color =</span> <span class="st">"Investor"</span>,</a>
<a class="sourceLine" id="cb10-14" data-line-number="14">         <span class="dt">size =</span> <span class="st">"Accumulated Value"</span>,</a>
<a class="sourceLine" id="cb10-15" data-line-number="15">         <span class="dt">edge_alpha =</span> <span class="st">"Accumulated </span><span class="ch">\n</span><span class="st"> Transactions"</span>,</a>
<a class="sourceLine" id="cb10-16" data-line-number="16">         <span class="dt">title =</span> <span class="st">"Network of Dafforne's Journal"</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-17" data-line-number="17"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/ggraph/topics/theme_graph">theme_graph</a></span>()</a></code></pre></div>
<p><img src="ledger_files/figure-html/ledger-graph-1.png" width="768"></p>
<p>The graph helps to identify the accounts that had the largest amount of capital pass through them, and the level of transparency of the edges shows the movement of capital. The transparency of the edges makes clear the significant movement of capital among communities of accounts such as the triad of accounts 7, 8, and 13 deriving from the sale of cochineal for Jacob Symonson to James Wilkinson.<a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a> The Kamada-Kawai layout algorithm places the nodes with the highest centrality, or the most connections, towards the center. Those that have fewer connections are placed on the outside. It is unsurprising to see the central position of accounts such as account 1, or the cash account, since any payment or reception of cash went through this account. This arrangement of the nodes can be confirmed by showing the accounts that have the most connections or links to other accounts.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="co"># 10 accounts with the most connections</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sort">sort</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/igraph/topics/degree">degree</a></span>(ledger_graph), <span class="dt">decreasing =</span> <span class="ot">TRUE</span>)[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>]</a></code></pre></div>
<table class="table">
<caption>Connections per account</caption>
<thead><tr class="header">
<th align="right">1</th>
<th align="right">23</th>
<th align="right">9</th>
<th align="right">13</th>
<th align="right">7</th>
<th align="right">18</th>
<th align="right">37</th>
<th align="right">38</th>
<th align="right">10</th>
<th align="right">16</th>
</tr></thead>
<tbody><tr class="odd">
<td align="right">24</td>
<td align="right">18</td>
<td align="right">15</td>
<td align="right">15</td>
<td align="right">14</td>
<td align="right">12</td>
<td align="right">11</td>
<td align="right">9</td>
<td align="right">8</td>
<td align="right">8</td>
</tr></tbody>
</table>
<p>The use of the “investor” variable for the color of the nodes is one of a variety of ways in which the accounts could be grouped. The graph helps to demonstrate the meaningfulness of the grouping, as well as highlighting something about Dafforne’s bookkeeping practices. This can be seen through a comparison of the involvement of four different merchants in the account book: Jacob Symonson, Randoll Rice, George Pinchback, and Diego del Varino. Both Jacob Symonson and Randoll Rice invested in a number of companies with the bookkeeper, but the accounts that involved the capital of Symonson (pink) interacted with more of the bookkeeper’s accounts (light orange) and a greater variety of accounts that involved other merchants than did those of Randoll Rice. Whereas the Kamada-Kawai algorithm places Symonson’s account close to the bookkeeper’s most significant accounts, Rice’s many accounts (light blue) mostly interacted with each other and so are shown towards the top of the graph, away from the center.</p>
<p>Compare the placement of the accounts of Rice to the single account for the merchant George Pinchback (red). Pinchback was involved in both the purchase and sale of goods, and this one account has 15 links to and from other accounts, making it quite central to the network.<a href="#fn7" class="footnote-ref" id="fnref7"><sup>7</sup></a> On the other end of the spectrum are the three accounts containing Diego del Varino’s capital (orange). Del Varino served as a factor in Lisbon for ventures made by the company that the bookkeeper had with Randoll Rice (accounts 30 and 36), but the orange accounts (40, 41, and 42) represent the bookkeeper’s work as Del Varino’s factor. These accounts have transactions between each other but with relatively few other accounts, leading to their placement on the edge of the graph. The comparison of the visual representation of the accounts of these four merchants is further demonstrated by creating a table relating the total links and accounts per the investor grouping.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="co"># Total links per investor</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2">total_links &lt;-<span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/reexports.html">tibble</a></span>(<span class="dt">id =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/numeric">as.numeric</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/igraph/topics/degree">degree</a></span>(ledger_graph))),</a>
<a class="sourceLine" id="cb12-3" data-line-number="3">                      <span class="dt">links =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/igraph/topics/degree">degree</a></span>(ledger_graph)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/join.html">left_join</a></span>(<span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(accounts, id, investor), <span class="dt">by =</span> <span class="st">"id"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(investor) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span>(<span class="dt">links =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sum">sum</a></span>(links)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-7" data-line-number="7"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span>(<span class="kw"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span>(links))</a>
<a class="sourceLine" id="cb12-8" data-line-number="8"></a>
<a class="sourceLine" id="cb12-9" data-line-number="9"><span class="co"># Accounts per investor</span></a>
<a class="sourceLine" id="cb12-10" data-line-number="10">accounts_investor &lt;-<span class="st"> </span>accounts <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-11" data-line-number="11"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(investor) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-12" data-line-number="12"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span>(<span class="dt">accounts =</span> <span class="kw"><a href="https://dplyr.tidyverse.org/reference/n.html">n</a></span>())</a>
<a class="sourceLine" id="cb12-13" data-line-number="13"><span class="kw"><a href="https://dplyr.tidyverse.org/reference/join.html">left_join</a></span>(total_links, accounts_investor, <span class="dt">by =</span> <span class="st">"investor"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-14" data-line-number="14"><span class="st">  </span>knitr<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/knitr/topics/kable">kable</a></span>(<span class="dt">caption =</span> <span class="st">"Links and accounts per investor"</span>)</a></code></pre></div>
<table class="table">
<caption>Links and accounts per investor</caption>
<thead><tr class="header">
<th align="left">investor</th>
<th align="right">links</th>
<th align="right">accounts</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Ego</td>
<td align="right">72</td>
<td align="right">8</td>
</tr>
<tr class="even">
<td align="left">Jacob Symonson</td>
<td align="right">71</td>
<td align="right">12</td>
</tr>
<tr class="odd">
<td align="left">Randoll Rice</td>
<td align="right">60</td>
<td align="right">13</td>
</tr>
<tr class="even">
<td align="left">George Pinchback</td>
<td align="right">15</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">James Wilkinson</td>
<td align="right">15</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Andrew Hitchcock</td>
<td align="right">11</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">Diego del Varino</td>
<td align="right">11</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">Jean du Boys</td>
<td align="right">10</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">Arthur Mumperson</td>
<td align="right">9</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">Linden, Does, Reinst</td>
<td align="right">8</td>
<td align="right">3</td>
</tr>
</tbody>
</table>
<p>Moving beyond the comparison of accounts bearing the capital of merchants, the visual structure of the graph and the grouping by investor demonstrates a more general bookkeeping practice recommended by Dafforne, namely the division of types of capital or ventures into separate accounts. This practice is seen most clearly in the multiple accounts involving Jacob Symonson and Randoll Rice, but the simplest example may be the three accounts of Diego del Varino. Instead of encompassing the work the bookkeeper performed as Del Varino’s factor within a single account, the bookkeeper spreads the capital among three separate accounts. Accounts 40, 41, and 42 record the sale of fruit for Del Varino to Randoll Rice (account 40), Rice’s partial payment in cash resulting in the creation of an account of ready money for Del Varino (account 41), and a separate current account for the remainder of the sale (account 42).</p>
<p>The practice of creating multiple accounts facilitated the calculation of profits or losses associated with individual ventures, but it also means that the total transactional value of an account book is a less meaningful measurement of capital investment than it might first appear. To properly keep track of various types of capital, Dafforne often transferred capital from one account to another, leading the same or similar values to be recorded multiple times. Thus, the total debit and sum of the transactions relating to the sale of fruit for Del Varino in his three accounts of £1446 18s. was much greater than the proceeds of the sale of £541 4s. 9d.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">(varino_debits &lt;-<span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(debits, account_id <span class="op">&gt;=</span><span class="st"> </span><span class="dv">40</span> <span class="op">&amp;</span><span class="st"> </span>account_id <span class="op">&lt;=</span><span class="st"> </span><span class="dv">42</span>))</a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="co">#&gt; # A tibble: 3 x 3</span></a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="co">#&gt;   account_id          dec investor        </span></a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="co">#&gt;        &lt;dbl&gt; &lt;l[20s:12d]&gt; &lt;chr&gt;           </span></a>
<a class="sourceLine" id="cb13-5" data-line-number="5"><span class="co">#&gt; 1         40     541.2375 Diego del Varino</span></a>
<a class="sourceLine" id="cb13-6" data-line-number="6"><span class="co">#&gt; 2         41     405.5292 Diego del Varino</span></a>
<a class="sourceLine" id="cb13-7" data-line-number="7"><span class="co">#&gt; 3         42     500.1333 Diego del Varino</span></a>
<a class="sourceLine" id="cb13-8" data-line-number="8"></a>
<a class="sourceLine" id="cb13-9" data-line-number="9"><span class="co"># Total debit</span></a>
<a class="sourceLine" id="cb13-10" data-line-number="10"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sum">sum</a></span>(varino_debits<span class="op">$</span>dec) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb13-11" data-line-number="11"><span class="st">  </span><span class="kw"><a href="../reference/cast-lsd.html">deb_as_lsd</a></span>()</a>
<a class="sourceLine" id="cb13-12" data-line-number="12"><span class="co">#&gt; &lt;deb_lsd[1]&gt;</span></a>
<a class="sourceLine" id="cb13-13" data-line-number="13"><span class="co">#&gt; [1] 1446:18s:0d</span></a>
<a class="sourceLine" id="cb13-14" data-line-number="14"><span class="co">#&gt; # Bases: 20s 12d</span></a></code></pre></div>
</div>
<div id="analyzing-individual-accounts" class="section level2">
<h2 class="hasAnchor">
<a href="#analyzing-individual-accounts" class="anchor"></a>Analyzing individual accounts</h2>
<p>The summary of accounts in Dafforne’s practice journal and ledger and the visualization of their relationships provide a good basis for further analysis into the workings of individual accounts. The accounts chosen for further inquiry and the nature of the analysis will differ according to the account book and the research questions being asked. This example concentrates on the development of the bookkeeper’s capital during the period covered by the journal and ledger by investigating the opening of the books through the stock account (account 2), the calculation of profits and losses during this period (account 23), and the state of the books at the time of their closing.</p>
<p>According to Dafforne, at the opening of a new set of account books the merchant must create an inventory in which all cash, unsold wares, debtors, and creditors are listed in relation to the stock account. Of this account Dafforne explains that it “containeth in it, all what a man possesseth; whether <em>Money, Wares, Debts</em> due to us, or the like: and (marke this well) <em>Cash</em>, yea, each particular thing that I possesse, is but a member of that whole body <em>stocke</em>; therefore by the joynt meeting of all those members, the body (<em>Stock</em>) is made compleat.”<a href="#fn8" class="footnote-ref" id="fnref8"><sup>8</sup></a> We can get a better understanding of the inventory or opening of the books by inspecting the stock account. One way to do this is to recreate the ledger entries for the account. The <code>dafforne_transactions</code> data is presented in the form of the journal: each transaction is listed once and tied to two accounts. The ledger can be replicated by finding all debit transactions for an account — the left side of the page in the ledger — and all credit transactions for the account — the right side of the ledger.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="co"># Stock is debtor</span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(transactions, debit <span class="op">==</span><span class="st"> </span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb14-3" data-line-number="3"><span class="co">#&gt; # A tibble: 1 x 6</span></a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="co">#&gt;      id credit debit date                  lsd          dec</span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5"><span class="co">#&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;date&gt;     &lt;lsd[20s:12d]&gt; &lt;l[20s:12d]&gt;</span></a>
<a class="sourceLine" id="cb14-6" data-line-number="6"><span class="co">#&gt; 1     7      7     2 1633-01-01      150:0s:0d          150</span></a>
<a class="sourceLine" id="cb14-7" data-line-number="7"></a>
<a class="sourceLine" id="cb14-8" data-line-number="8"><span class="co"># Stock is creditor</span></a>
<a class="sourceLine" id="cb14-9" data-line-number="9"><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(transactions, credit <span class="op">==</span><span class="st"> </span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb14-10" data-line-number="10"><span class="co">#&gt; # A tibble: 6 x 6</span></a>
<a class="sourceLine" id="cb14-11" data-line-number="11"><span class="co">#&gt;      id credit debit date                  lsd          dec</span></a>
<a class="sourceLine" id="cb14-12" data-line-number="12"><span class="co">#&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;date&gt;     &lt;lsd[20s:12d]&gt; &lt;l[20s:12d]&gt;</span></a>
<a class="sourceLine" id="cb14-13" data-line-number="13"><span class="co">#&gt; 1     1      2     1 1633-01-01    1000:15s:7d  1000.779167</span></a>
<a class="sourceLine" id="cb14-14" data-line-number="14"><span class="co">#&gt; 2     2      2     3 1633-01-01     477:10s:0d   477.500000</span></a>
<a class="sourceLine" id="cb14-15" data-line-number="15"><span class="co">#&gt; 3     3      2     4 1633-01-01       55:0s:6d    55.025000</span></a>
<a class="sourceLine" id="cb14-16" data-line-number="16"><span class="co">#&gt; 4     4      2     5 1633-01-01      240:0s:0d   240.000000</span></a>
<a class="sourceLine" id="cb14-17" data-line-number="17"><span class="co">#&gt; 5     5      2     6 1633-01-01      229:0s:0d   229.000000</span></a>
<a class="sourceLine" id="cb14-18" data-line-number="18"><span class="co">#&gt; 6     6      2     8 1633-01-01       3:17s:8d     3.883333</span></a></code></pre></div>
<p>The ledger also includes the sum of the debits and credits, which can be presented using the <code><a href="../reference/transactions.html">deb_account()</a></code> function.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="co"># Summary of stock account</span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="kw"><a href="../reference/transactions.html">deb_account</a></span>(transactions, <span class="dt">account_id =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="co">#&gt; # A tibble: 3 x 2</span></a>
<a class="sourceLine" id="cb15-4" data-line-number="4"><span class="co">#&gt;   relation            lsd</span></a>
<a class="sourceLine" id="cb15-5" data-line-number="5"><span class="co">#&gt;   &lt;chr&gt;    &lt;lsd[20s:12d]&gt;</span></a>
<a class="sourceLine" id="cb15-6" data-line-number="6"><span class="co">#&gt; 1 credit       2006:3s:9d</span></a>
<a class="sourceLine" id="cb15-7" data-line-number="7"><span class="co">#&gt; 2 debit         150:0s:0d</span></a>
<a class="sourceLine" id="cb15-8" data-line-number="8"><span class="co">#&gt; 3 current      1856:3s:9d</span></a></code></pre></div>
<p>The inventory consisted of seven items: six credits or items that served to increase the bookkeeper’s stock and one debit of money he owed to another. When taken together, the inventory demonstrated that the bookkeeper’s credits exceeded his liabilities by £1,856 3s. 9d., which represents the sum of the bookkeeper’s estate on 1 January 1633 English style. This means that over 92% of the capital in the inventory belonged to the bookkeeper.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="co"># Percentage of bookkeeper's stock to total capital</span></a>
<a class="sourceLine" id="cb16-2" data-line-number="2"><span class="kw"><a href="../reference/deb_lsd.html">deb_lsd</a></span>(<span class="dv">1856</span>, <span class="dv">3</span>, <span class="dv">9</span>) <span class="op">/</span><span class="st"> </span><span class="kw"><a href="../reference/deb_lsd.html">deb_lsd</a></span>(<span class="dv">2006</span>, <span class="dv">3</span>, <span class="dv">9</span>)</a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="co">#&gt; [1] 0.9252313</span></a></code></pre></div>
<p>The most significant account for the development of the bookkeeper’s capital or stock over the course of the journal and ledger is that of profit and loss (account 23). Completed ventures or accounts are balanced by bringing the difference between the total credit and debit to the profit and loss account. Ventures that result in more credit than debit — for instance if the sale of goods (credit) was more than the purchase of the goods plus any expenses (debit) — create a profit. In such as case profit and loss is made creditor to the account for the difference. The opposite occurs with losses. Thus, a merchant hopes to have more credit than debit in the account of profit and loss, which is what occurred in Dafforne’s practice books.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="co"># Summary of profit and loss</span></a>
<a class="sourceLine" id="cb17-2" data-line-number="2"><span class="kw"><a href="../reference/transactions.html">deb_account</a></span>(transactions, <span class="dt">account_id =</span> <span class="dv">23</span>)</a>
<a class="sourceLine" id="cb17-3" data-line-number="3"><span class="co">#&gt; # A tibble: 3 x 2</span></a>
<a class="sourceLine" id="cb17-4" data-line-number="4"><span class="co">#&gt;   relation            lsd</span></a>
<a class="sourceLine" id="cb17-5" data-line-number="5"><span class="co">#&gt;   &lt;chr&gt;    &lt;lsd[20s:12d]&gt;</span></a>
<a class="sourceLine" id="cb17-6" data-line-number="6"><span class="co">#&gt; 1 credit      1075:8s:11d</span></a>
<a class="sourceLine" id="cb17-7" data-line-number="7"><span class="co">#&gt; 2 debit          29:0s:1d</span></a>
<a class="sourceLine" id="cb17-8" data-line-number="8"><span class="co">#&gt; 3 current     1046:8s:10d</span></a></code></pre></div>
<p>The account books only showed three small losses or debits during the course of the books, so it is more interesting to concentrate on the much more substantial profits. A useful measurement is to see not only raw value that each account created in profits but also the relation of that value to the total profits, shown here as a percentage. <code>dplyr</code>’s <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> does not work with <code>deb_lsd</code> columns, and so the <code>deb_decimal</code> column is used instead. However, I recreate a <code>deb_lsd</code> column, so that the profit values appear as they do in the book.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="co"># Percentage of profits by account</span></a>
<a class="sourceLine" id="cb18-2" data-line-number="2">profits &lt;-<span class="st"> </span>transactions <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(credit <span class="op">==</span><span class="st"> </span><span class="dv">23</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(debit) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span>(<span class="dt">dec =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sum">sum</a></span>(dec)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-6" data-line-number="6"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">pct =</span> dec <span class="op">/</span><span class="st"> </span><span class="kw"><a href="../reference/deb_lsd.html">deb_lsd</a></span>(<span class="dv">1046</span>, <span class="dv">8</span>, <span class="dv">10</span>) <span class="op">*</span><span class="st"> </span><span class="dv">100</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-7" data-line-number="7"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/join.html">left_join</a></span>(accounts, <span class="dt">by =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"debit"</span> =<span class="st"> "id"</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-8" data-line-number="8"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="dt">id =</span> debit, account, dec, pct) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb18-9" data-line-number="9"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span>(<span class="kw"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span>(pct))</a>
<a class="sourceLine" id="cb18-10" data-line-number="10"></a>
<a class="sourceLine" id="cb18-11" data-line-number="11"><span class="co"># Add deb_lsd column</span></a>
<a class="sourceLine" id="cb18-12" data-line-number="12">profits[[<span class="st">"lsd"</span>]] &lt;-<span class="st"> </span><span class="kw"><a href="../reference/cast-lsd.html">deb_as_lsd</a></span>(profits[[<span class="st">"dec"</span>]])</a>
<a class="sourceLine" id="cb18-13" data-line-number="13"></a>
<a class="sourceLine" id="cb18-14" data-line-number="14"><span class="co"># Select columns in desired order</span></a>
<a class="sourceLine" id="cb18-15" data-line-number="15"><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(profits, id, account, lsd, pct)</a>
<a class="sourceLine" id="cb18-16" data-line-number="16"><span class="co">#&gt; # A tibble: 16 x 4</span></a>
<a class="sourceLine" id="cb18-17" data-line-number="17"><span class="co">#&gt;       id account                                                 lsd    pct</span></a>
<a class="sourceLine" id="cb18-18" data-line-number="18"><span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt;                                         &lt;lsd[20s:12d&gt;  &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb18-19" data-line-number="19"><span class="co">#&gt;  1    21 Profit and loss - company with Randoll Rice      298:18s:4d 28.6  </span></a>
<a class="sourceLine" id="cb18-20" data-line-number="20"><span class="co">#&gt;  2    12 Kerseys in company with Jacob Symonson            128:5s:0d 12.3  </span></a>
<a class="sourceLine" id="cb18-21" data-line-number="21"><span class="co">#&gt;  3    29 Figs - company with Randoll Rice                 114:15s:5d 11.0  </span></a>
<a class="sourceLine" id="cb18-22" data-line-number="22"><span class="co">#&gt;  4    11 Voyage to Amsterdam - Jacob Symonson             111:17s:0d 10.7  </span></a>
<a class="sourceLine" id="cb18-23" data-line-number="23"><span class="co">#&gt;  5     3 Wares                                             92:10s:0d  8.84 </span></a>
<a class="sourceLine" id="cb18-24" data-line-number="24"><span class="co">#&gt;  6    24 Voyage to Lisbon - company with Jacob Symons…     63:17s:9d  6.11 </span></a>
<a class="sourceLine" id="cb18-25" data-line-number="25"><span class="co">#&gt;  7     5 Jean du Boys - account current                     56:5s:6d  5.38 </span></a>
<a class="sourceLine" id="cb18-26" data-line-number="26"><span class="co">#&gt;  8     6 Jacob Symonson - account by him in company         50:0s:0d  4.78 </span></a>
<a class="sourceLine" id="cb18-27" data-line-number="27"><span class="co">#&gt;  9     9 George Pinchback                                   36:5s:0d  3.46 </span></a>
<a class="sourceLine" id="cb18-28" data-line-number="28"><span class="co">#&gt; 10     8 Jacob Symonson - Cochineal                        31:12s:2d  3.02 </span></a>
<a class="sourceLine" id="cb18-29" data-line-number="29"><span class="co">#&gt; 11    38 Amsterdam exchange - company with Jacob Symo…      22:0s:8d  2.11 </span></a>
<a class="sourceLine" id="cb18-30" data-line-number="30"><span class="co">#&gt; 12     4 Kettles                                            20:0s:2d  1.91 </span></a>
<a class="sourceLine" id="cb18-31" data-line-number="31"><span class="co">#&gt; 13    16 Interest reckoning                                 16:6s:2d  1.56 </span></a>
<a class="sourceLine" id="cb18-32" data-line-number="32"><span class="co">#&gt; 14     1 Cash                                               13:4s:0d  1.26 </span></a>
<a class="sourceLine" id="cb18-33" data-line-number="33"><span class="co">#&gt; 15    26 Danzig exchange - company with Arthur Mumper…     10:19s:9d  1.05 </span></a>
<a class="sourceLine" id="cb18-34" data-line-number="34"><span class="co">#&gt; 16    27 Jacob Symonson - Cambric cloth                     8:12s:0d  0.822</span></a></code></pre></div>
<p>The process of closing a set of books as described by Dafforne involved identifying open accounts, those that still had a positive or negative balance, and transferring the remaining balance to an account Dafforne called “Balance”.<a href="#fn9" class="footnote-ref" id="fnref9"><sup>9</sup></a> This account and the transactions that serve to balance the accounts in the books are absent from <code>dafforne_transactions</code> and <code>dafforne_accounts</code>, but they can be recreated here. The first step is to identify all accounts that remained open on July 20th, 1634 when Dafforne closed the books.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="co"># Open accounts: Arranged from credits to debits</span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2">(balance &lt;-<span class="st"> </span><span class="kw"><a href="../reference/transactions.html">deb_open</a></span>(transactions) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/join.html">left_join</a></span>(<span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(accounts, id, account), <span class="dt">by =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"account_id"</span> =<span class="st"> "id"</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span>(<span class="kw"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/numeric">as.numeric</a></span>(lsd))))</a>
<a class="sourceLine" id="cb19-5" data-line-number="5"><span class="co">#&gt; # A tibble: 14 x 3</span></a>
<a class="sourceLine" id="cb19-6" data-line-number="6"><span class="co">#&gt;    account_id             lsd account                                      </span></a>
<a class="sourceLine" id="cb19-7" data-line-number="7"><span class="co">#&gt;         &lt;dbl&gt;  &lt;lsd[20s:12d]&gt; &lt;chr&gt;                                        </span></a>
<a class="sourceLine" id="cb19-8" data-line-number="8"><span class="co">#&gt;  1          2      1856:3s:9d Stock                                        </span></a>
<a class="sourceLine" id="cb19-9" data-line-number="9"><span class="co">#&gt;  2         23     1046:8s:10d Profit and loss                              </span></a>
<a class="sourceLine" id="cb19-10" data-line-number="10"><span class="co">#&gt;  3         19       991:7s:6d Randoll Rice - account by me in company      </span></a>
<a class="sourceLine" id="cb19-11" data-line-number="11"><span class="co">#&gt;  4         14       512:3s:8d Jacob Symonson - account by me in company    </span></a>
<a class="sourceLine" id="cb19-12" data-line-number="12"><span class="co">#&gt;  5         33        99:7s:7d Hendrick vander Linden, John van Does, Jaque…</span></a>
<a class="sourceLine" id="cb19-13" data-line-number="13"><span class="co">#&gt;  6         46       93:19s:8d Hendrick vander Linden, John van Does, Jaque…</span></a>
<a class="sourceLine" id="cb19-14" data-line-number="14"><span class="co">#&gt;  7         35    -189:-12s:0d Voyage to Antwerp - company with Randoll Rice</span></a>
<a class="sourceLine" id="cb19-15" data-line-number="15"><span class="co">#&gt;  8          6     -301:0s:-8d Jacob Symonson - account by him in company   </span></a>
<a class="sourceLine" id="cb19-16" data-line-number="16"><span class="co">#&gt;  9         39   -402:-12s:-1d Arthur Mumperson                             </span></a>
<a class="sourceLine" id="cb19-17" data-line-number="17"><span class="co">#&gt; 10         43    -413:-6s:-8d Thomas Trust - company with Randoll Rice - a…</span></a>
<a class="sourceLine" id="cb19-18" data-line-number="18"><span class="co">#&gt; 11         37   -446:-12s:-9d Andrew Hitchcock                             </span></a>
<a class="sourceLine" id="cb19-19" data-line-number="19"><span class="co">#&gt; 12         45   -806:-6s:-11d Figs - company with Jacob Symonson           </span></a>
<a class="sourceLine" id="cb19-20" data-line-number="20"><span class="co">#&gt; 13          1    -947:-2s:-1d Cash                                         </span></a>
<a class="sourceLine" id="cb19-21" data-line-number="21"><span class="co">#&gt; 14         20 -1092:-17s:-10d Jean du Boys - company with Randoll Rice</span></a></code></pre></div>
<p>This operation essentially recreates the the Balance account as used by Dafforne, though one alteration must be made before they are truly equivalent. According to Dafforne, the penultimate step in creating a balance is to close the account for profits and losses by “carrying the difference to your Stock account.”<a href="#fn10" class="footnote-ref" id="fnref10"><sup>10</sup></a> Adding the value remaining in the profit and loss account (account 23) to the stock account (account 2) calculates the total capital held by the bookkeeper, while also balancing the profit and loss account so that it can again calculate the profits and losses experienced during the duration of the next set of books. Thus, a true balance as described by Dafforne would show that the stock account concluded with a total credit of £2,902 12s. 7d.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1"><span class="co"># Stock at the close of the books</span></a>
<a class="sourceLine" id="cb20-2" data-line-number="2">stock_balance &lt;-<span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(balance, account_id <span class="op">==</span><span class="st"> </span><span class="dv">2</span> <span class="op">|</span><span class="st"> </span>account_id <span class="op">==</span><span class="st"> </span><span class="dv">23</span>)</a>
<a class="sourceLine" id="cb20-3" data-line-number="3"></a>
<a class="sourceLine" id="cb20-4" data-line-number="4"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sum">sum</a></span>(stock_balance<span class="op">$</span>lsd)</a>
<a class="sourceLine" id="cb20-5" data-line-number="5"><span class="co">#&gt; &lt;deb_lsd[1]&gt;</span></a>
<a class="sourceLine" id="cb20-6" data-line-number="6"><span class="co">#&gt; [1] 2902:12s:7d</span></a>
<a class="sourceLine" id="cb20-7" data-line-number="7"><span class="co">#&gt; # Bases: 20s 12d</span></a></code></pre></div>
<p>This information enabled merchants to understand the development of their capital. In this instance, the bookkeeper’s capital grew by over 56% in less than eight months, as his capital or stock, the amount that the credits on his book surpassed the debits, increased from £1,856 3s. 9d. to £2,902 12s. 7d.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="co"># Create an lsd object for easier calculation</span></a>
<a class="sourceLine" id="cb21-2" data-line-number="2">(balance_lsd &lt;-<span class="st"> </span>balance<span class="op">$</span>lsd)</a>
<a class="sourceLine" id="cb21-3" data-line-number="3"><span class="co">#&gt; &lt;deb_lsd[14]&gt;</span></a>
<a class="sourceLine" id="cb21-4" data-line-number="4"><span class="co">#&gt;  [1] 1856:3s:9d      1046:8s:10d     991:7s:6d       512:3s:8d      </span></a>
<a class="sourceLine" id="cb21-5" data-line-number="5"><span class="co">#&gt;  [5] 99:7s:7d        93:19s:8d       -189:-12s:0d    -301:0s:-8d    </span></a>
<a class="sourceLine" id="cb21-6" data-line-number="6"><span class="co">#&gt;  [9] -402:-12s:-1d   -413:-6s:-8d    -446:-12s:-9d   -806:-6s:-11d  </span></a>
<a class="sourceLine" id="cb21-7" data-line-number="7"><span class="co">#&gt; [13] -947:-2s:-1d    -1092:-17s:-10d</span></a>
<a class="sourceLine" id="cb21-8" data-line-number="8"><span class="co">#&gt; # Bases: 20s 12d</span></a>
<a class="sourceLine" id="cb21-9" data-line-number="9"><span class="co"># Percentage of growth: profits over opening capital</span></a>
<a class="sourceLine" id="cb21-10" data-line-number="10">balance_lsd[<span class="dv">2</span>] <span class="op">/</span><span class="st"> </span>balance_lsd[<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb21-11" data-line-number="11"><span class="co">#&gt; [1] 0.5637586</span></a></code></pre></div>
<p>Not only did the bookkeeper’s own capital grow rapidly, but the capital contained in the account books increased even more quickly. Whereas there had only been a total of £2,006 3s. 9d. at the time of the inventory, by the closing of the books the assets and liabilities remained on the books had more than doubled to £4,599 11s., a growth of 129%. This of course meant that bookkeeper’s stock, or the amount that his assets exceeded his liabilities, now constituted a much smaller percentage of the capital as a whole, having decreased from the original 92% to a much more reasonable 63%. This ratio of the bookkeeper’s estate to total capital in his account books indicates a more mature and diversified trading portfolio than is present at the time of the inventory.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1"><span class="co"># Total balance remaining on the books</span></a>
<a class="sourceLine" id="cb22-2" data-line-number="2"><span class="kw"><a href="../reference/transactions.html">deb_balance</a></span>(transactions)</a>
<a class="sourceLine" id="cb22-3" data-line-number="3"><span class="co">#&gt; # A tibble: 2 x 2</span></a>
<a class="sourceLine" id="cb22-4" data-line-number="4"><span class="co">#&gt;   relation            lsd</span></a>
<a class="sourceLine" id="cb22-5" data-line-number="5"><span class="co">#&gt;   &lt;chr&gt;    &lt;lsd[20s:12d]&gt;</span></a>
<a class="sourceLine" id="cb22-6" data-line-number="6"><span class="co">#&gt; 1 credit      4599:11s:0d</span></a>
<a class="sourceLine" id="cb22-7" data-line-number="7"><span class="co">#&gt; 2 debit     -4599:-11s:0d</span></a>
<a class="sourceLine" id="cb22-8" data-line-number="8"></a>
<a class="sourceLine" id="cb22-9" data-line-number="9"><span class="co"># Growth in the capital on the books</span></a>
<a class="sourceLine" id="cb22-10" data-line-number="10">(<span class="kw"><a href="../reference/deb_lsd.html">deb_lsd</a></span>(<span class="dv">4599</span>, <span class="dv">11</span>, <span class="dv">0</span>) <span class="op">-</span><span class="st"> </span><span class="kw"><a href="../reference/deb_lsd.html">deb_lsd</a></span>(<span class="dv">2006</span>, <span class="dv">3</span>, <span class="dv">9</span>)) <span class="op">/</span><span class="st"> </span><span class="kw"><a href="../reference/deb_lsd.html">deb_lsd</a></span>(<span class="dv">2006</span>, <span class="dv">3</span>, <span class="dv">9</span>)</a>
<a class="sourceLine" id="cb22-11" data-line-number="11"><span class="co">#&gt; [1] 1.292682</span></a>
<a class="sourceLine" id="cb22-12" data-line-number="12"></a>
<a class="sourceLine" id="cb22-13" data-line-number="13"><span class="co"># Percentage of bookkeeper's stock to total capital</span></a>
<a class="sourceLine" id="cb22-14" data-line-number="14"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sum">sum</a></span>(balance_lsd[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]) <span class="op">/</span><span class="st"> </span><span class="kw"><a href="../reference/deb_lsd.html">deb_lsd</a></span>(<span class="dv">4599</span>, <span class="dv">11</span>, <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb22-15" data-line-number="15"><span class="co">#&gt; [1] 0.6310681</span></a></code></pre></div>
</div>
<div id="conclusion" class="section level2">
<h2 class="hasAnchor">
<a href="#conclusion" class="anchor"></a>Conclusion</h2>
<p>The analysis of Dafforne’s practice journal and ledger presented here provides a glimpse into the types of investigations, calculations, and visualizations that <code>debleepr</code> makes possible. Most of the calculations and even the visuals presented in this vignette could be made without <code>debkeepr</code>. Of course, in the seventeenth century merchants had to make all of their accounting calculations by hand. Yet, this was and is a cumbersome activity. It is not a particularly mathematically difficult task to add together the credits or debits of the accounts remaining open at the closing of the book, but it is certainly easier to use <code><a href="../reference/transactions.html">deb_balance(transactions)</a></code>. The task is more difficult when the question is the total transactional value that passed through the account book. Here, <code><a href="https://www.rdocumentation.org/packages/base/topics/sum">sum(transactions$lsd)</a></code> is much preferable. Moreover, while it is possible to reproduce the graphs showing the values of the transactions or the summary of the accounts, this would involve long periods of data entry that might not be of much use beyond the single implementation.</p>
<p>At the same time, <code>debkeepr</code> introduces tools of analysis that are not possible without the ability to manipulate pounds, shillings, and pence within a data base. The network graph of the transactions in Dafforne’s journal would be difficult to recreate without <code>debkeepr</code>, especially if you wanted to maintain total accuracy and be able to see the values in pounds, shillings, and pence form. The transformation of data from an account book into a network graph object opens up all kinds of new forms of analysis. This vignette has only scratched the surface of the possibilities.</p>
<p>The most valuable tool that <code>debkeepr</code> brings to the analysis of historical economic data that takes the form of pounds, shillings, and pence values is the possibility of quickly iterating over problems and providing solutions that are <a href="http://ropensci.github.io/reproducibility-guide/">reproducible</a>. <code>debkeepr</code> provides a workflow for entering data from account books into a data base, <a href="http://vita.had.co.nz/papers/tidy-data.html">tidying the data</a> by transforming separate pounds, shillings, and pence variables into <code>deb_lsd</code> or <code>deb_decimal</code> columns, and then exploring, analyzing, and visualizing the data in ways that integrate with the <a href="https://www.tidyverse.org">tidyverse</a> and more general practices of data analysis in R. Take for instance the last set of calculations concerning the balance to close the books and its relation to the bookkeeper’s stock. The calculations could be done by hand, but the steps become more transparent when done through code. Another example of this is the calculation of percentage of profits by account for the profit and loss account. Each step in the analysis can be followed and individually critiqued to ensure that the calculations are properly made. In addition, the process is easily replicable for all other accounts in the account book. In other words, <code>debkeepr</code> provides a powerful and transparent set of tools for the investigation into and analysis of the social interactions found in historical account books.</p>
</div>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p>For an introduction to the use of <code>debkeepr</code>, see the <a href="https://jessesadler.github.io/debkeepr/articles/debkeepr.html">Getting Started with debkeepr</a> vignette.<a href="#fnref1" class="footnote-back">↩</a></p></li>
<li id="fn2"><p>The dates in the journal follow the Anglican calendar, which used the Julian calendar and used the 25th of March as the New Year.<a href="#fnref2" class="footnote-back">↩</a></p></li>
<li id="fn3"><p>A csv of the full journal is available on <a href="https://github.com/jessesadler/debkeepr/blob/master/data-raw/dafforne-transactions.csv">GitHub</a>.<a href="#fnref3" class="footnote-back">↩</a></p></li>
<li id="fn4"><p>The accounts often involve multiple people. Thus, account 17 represents the values associated with 100 says consigned to Diego del Varino in Lisbon for a company between the bookkeeper and Randoll Rice. The “investor” variable provides a means to organize the accounts by those with whom the bookkeeper invested, and so in the case of account 17 Randoll Rice is listed as the “investor” and not Diego del Varino, who was acting as a factor.<a href="#fnref4" class="footnote-back">↩</a></p></li>
<li id="fn5"><p>It is for this reason that the balance account is not included in the <code>dafforne_transactions</code> data. If it was included, all of the accounts would be balanced.<a href="#fnref5" class="footnote-back">↩</a></p></li>
<li id="fn6"><p>Transactions 28 and 32 in the journal.<a href="#fnref6" class="footnote-back">↩</a></p></li>
<li id="fn7"><p>The accounts for the merchants James Wilkinson (green) and Andrew Hitchcock (purple) are structurally similar to that of Pinchback.<a href="#fnref7" class="footnote-back">↩</a></p></li>
<li id="fn8"><p>Dafforne, <em>Merchant’s Mirrour</em>, 9.<a href="#fnref8" class="footnote-back">↩</a></p></li>
<li id="fn9"><p>Dafforne, <em>Merchant’s Mirrour</em>, 47–50.<a href="#fnref9" class="footnote-back">↩</a></p></li>
<li id="fn10"><p>Dafforne, <em>Merchant’s Mirrour</em>, 50.<a href="#fnref10" class="footnote-back">↩</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#the-data">The data</a></li>
      <li><a href="#overview-of-the-account-books">Overview of the account books</a></li>
      <li><a href="#relationship-between-accounts">Relationship between accounts</a></li>
      <li><a href="#analyzing-individual-accounts">Analyzing individual accounts</a></li>
      <li><a href="#conclusion">Conclusion</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="https://www.jessesadler.com">Jesse Sadler</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
